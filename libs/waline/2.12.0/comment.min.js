!function(e,t){"function"==typeof define&&define.amd?define("Waline",["exports"],t):"undefined"!=typeof exports?t(exports):(t(t={}),e.Waline=t)}("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:this,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.version=e.commentCount=void 0;const l=e=>{"AbortError"!==e.name&&console.error(e.message)};e.commentCount=e=>{let{serverURL:t,path:n=window.location.pathname,selector:r=".waline-comment-count",lang:o="zh-CN"}=e;const i=new AbortController,a=document.querySelectorAll(r);return a.length&&(e=>{let{serverURL:t,lang:n,paths:r,signal:o}=e;return fetch(`${t}/comment?type=count&url=${encodeURIComponent(r.join(","))}&lang=`+n,{signal:o,headers:{}}).then(e=>e.json()).then(e=>function(e,t){if("object"==typeof e&&e.errno)throw new TypeError(`Fetch ${1<arguments.length&&void 0!==t?t:""} failed with ${e.errno}: `+e.errmsg);return e}(e,"comment count")).then(e=>Array.isArray(e)?e:[e])})({serverURL:(e=>{e=function(e){return(0<arguments.length&&void 0!==e?e:"").replace(/\/$/u,"")}(e);return/^(https?:)?\/\//.test(e)?e:"https://"+e})(t),paths:Array.from(a).map(e=>{var t=e.dataset.path||e.getAttribute("id")||n;try{t=decodeURI(t)}catch(t){}return t}),lang:o,signal:i.signal}).then(n=>{a.forEach((e,t)=>{e.innerText=n[t].toString()})}).catch(l),i.abort.bind(i)},e.version="2.12.0"});